{"version":3,"sources":["components/commonComponents/CommonGridListItem/CommonGridListItemWrapper.tsx","app/KabuRecord/functions/handleCalKabu.ts","app/KabuRecord/functions/HandleKabuTrend.ts","app/KabuRecord/config.ts","app/KabuRecord/components/OtherDayKabuItemHeader.tsx","app/KabuRecord/containers/InputItemContainer.tsx","app/KabuRecord/components/OtherDayKabuItem.tsx","app/KabuRecord/components/OtherDayKabuForm.tsx","app/KabuRecord/functions/makeSellingAdvise.ts","app/KabuRecord/functions/checkPriceIsOverdueHighest.ts","app/KabuRecord/components/KabuTrendTypePrediction.tsx","app/KabuRecord/containers/ResetButtonContainer.tsx","app/KabuRecord/functions/KabuFormDateHandler.ts","app/KabuRecord/functions/DateLocalStorageHandler.ts","app/KabuRecord/functions/HandleLocalStorage.ts","app/KabuRecord/functions/HighlightTextHandler.ts","app/KabuRecord/functions/getFormattedTextByType.tsx","app/KabuRecord/components/Announcements.tsx","app/KabuRecord/containers/OtherDayKabuFormContainer.tsx","app/KabuRecord/components/Header.tsx","app/KabuRecord/components/Footer.tsx","app/KabuRecord/theme/theme.ts","app/KabuRecord/index.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["CommonGridListItemWrapper","props","ListItem","Grid","container","widthRatios","map","w","i","item","xs","key","children","handleCalKabu","sundayPrice","mondayMorningPrice","toFixed","HandleKabuTrends","otherDaysPrices","sun","morning","mon","afternoon","tue","wed","thu","fri","sat","kabuValue","K","Number","prices","includes","number1","number2","originPrice","p","res","length","this","getTwoNumbersRatio","priceRatios","position","priceMultiWithOriginPrice","getPriceMultiWithOriginPrice","getPricesRatios","reboundPosition","getPositionOfReboundInPriceRatios","haveRebound","firstPeriodPricePosition","firstPeriodPriceMulti","secondPeriodPricePosition","secondPeriodPriceMulti","thirdPeriodPricePosition","thirdPeriodPriceMulti","forthPeriodPricePosition","forthPeriodPriceMulti","secondPriceIsInputed","console","log","highestPricePosition","undefined","pricesBeforeLastCheck","slice","priceRatiosBeforeLastCheck","isAllPricesBeforeLastCheckAreHaveValues","checkPricesAreAllBiggerThanZero","reboundPositionBeforeLastCheck","getReboundAndHighestPricePosition","kabuTrendTypes","getThirdOrForthKabuTrendType","isNoReboundBeforeLastCheck","checkIsNoReboundBeforeLastPosition","isForthPriceMultiSmallerThanReboundTrendSeperatingMulti","KabuValue","typesFromKabuValue","getKabuTrendPredictionsFromKabuValue","getForthKabuTrendsAndPricePosition","getWaveOrThirdOrForthKabuTrendType","getWaveOrForthKabuTrendType","getDecrementOrThirdOrForthKabuTrendsAndPricePosition","otherDayKabuItemWidthRatios","kabuTrends","notDefined","decrement","wave","third","forth","otherDaysText_zhTw","dayTimesText_zhTw","highestPositionToText","0","1","2","3","4","5","6","7","8","9","10","11","12","OtherDayKabuItemHeader","ListItemText","InputItemContainer","id","value","variant","onChange","handleChange","useCallback","e","target","TextField","type","OtherDayKabuItem","date","day","dayTimePrices","Box","paddingLeft","dayTime","String","OtherDayKabuForm","paddingY","Paper","elevation","Divider","otherDayList","d","makeSellingAdvise","locale","isOverdue","localeText","texts","isOnlyOneType","isWaveType","isThirdType","isForthType","isPriceNotConfirmed","checkPriceIsOverdueHighest","latestPricesPosition","arr","numberIndexes","getLastNotZeroNumberFromArr","useStyles","makeStyles","theme","root","borderColor","palette","primary","dark","borderWidth","borderStyle","borderRadius","KabuTrendTypePrediction","classes","trendsStr","trend","join","sellingAdvise","className","padding","display","alignItems","paddingTop","paddingBottom","Typography","backgroundColor","main","ResetButtonContainer","handleResetPrices","window","confirm","resetPricesFn","Button","onClick","KabuFormDateHandler","today","todayDay","getDay","Date","setDate","getDate","thisWeekSunday","next","_thisWeekSunday","getThisWeekOtherDayFromSunday","storedSundayDate","DateLocalStorageHandler","getData","getThisWeekSaturdayFromSunday","dates","getMonth","weekStrJoinSymbol","thisWeekSundayDate","dateStr","localStorage","getItem","toString","setItem","storedDate","getThisWeekSunday","toLocaleDateString","setData","initDayPrices","defaultInitOtherDayPrices","HandleLocalStorage","data","parsed","JSON","parse","HighlightTextHandler","content","replace","highlightForRemoveTagRegExp","text","textNow","matchRes","match","highlightRegExp","matchedStr","matchedStrLength","matchedFirstIndex","indexOf","matchedNormalStr","removeHighlightTag","RegExp","spacing","GetFormattedTextByType","formatedText","index","component","splitTextWithRegExp","annoucementContents","AnnouncementItem","formatedTextList","title","fontWeight","color","Announcements","a","otherDaysArr","OtherDayKabuFormContainer","useState","initOtherDayPrices","dayPrices","setDayPrices","fromToDatesStr","setDatesStr","dayAndTime","handleResetPricesAndDate","reset","useEffect","stringify","checkIsNewWeek","storeThisWeekSunday","thisWeekFromToDates","getThisWeekFromToDatesWithStoredDate","thisWeekFromToDatesStr","convertDatesToJoinedStr","getThisWeekPrices","kabuTrendTypesAndPricePosition","getPresiceTrendType","Container","textAlign","Header","justifyContent","paddingRight","src","alt","style","width","height","href","LinkItemInFooter","Link","links","referenceLinks","footerRemarks","Footer","r","link","process","anclTheme","createMuiTheme","typography","fontFamily","light","secondary","KabuRecord","ThemeProvider","minHeight","App","Boolean","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.aad1bd08.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Box, ListItem, Grid } from '@material-ui/core';\r\nimport { CommonGridListItemWrapperProps } from './types';\r\n\r\nconst CommonGridListItemWrapper = (props: CommonGridListItemWrapperProps) => {\r\n  return (\r\n    <ListItem>\r\n      <Grid container>\r\n        {props.widthRatios.map((w, i) => (\r\n          <Grid item xs={w} key={i}>\r\n            {props.children[i]}\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nexport default CommonGridListItemWrapper;","const handleCalKabu = (sundayPrice: number, mondayMorningPrice: number) => {\r\n  if(sundayPrice === 0 || mondayMorningPrice === 0) {\r\n    return 0;\r\n  }\r\n  return ((mondayMorningPrice / sundayPrice) * 100).toFixed(2);\r\n};\r\n\r\nexport default handleCalKabu;","import { KabuTrendType, SingleWeekKabuRecord } from \"../types\";\r\nimport handleCalKabu from \"./handleCalKabu\";\r\nimport { KabuTrendsAndHighestPricePosition } from '../types';\r\n\r\nconst reboundTrendSeperatingMulti = 1.4;\r\nexport const noReboundPosition = -1000;\r\n//check decrement first(last position is thu afternoon(index: 8))\r\nconst lastCheckReboundPosition = 8 + 1;\r\n\r\nclass HandleKabuTrends {\r\n  //from sun ~ sat, length is 13\r\n  static getThisWeekPrices(otherDaysPrices: SingleWeekKabuRecord['otherDaysPrice']): number[] {\r\n    return [\r\n      otherDaysPrices.sun.morning,\r\n\r\n      otherDaysPrices.mon.morning,\r\n      otherDaysPrices.mon.afternoon,\r\n\r\n      otherDaysPrices.tue.morning,\r\n      otherDaysPrices.tue.afternoon,\r\n\r\n      otherDaysPrices.wed.morning,\r\n      otherDaysPrices.wed.afternoon,\r\n\r\n      otherDaysPrices.thu.morning,\r\n      otherDaysPrices.thu.afternoon,\r\n\r\n      otherDaysPrices.fri.morning,\r\n      otherDaysPrices.fri.afternoon,\r\n\r\n      otherDaysPrices.sat.morning,\r\n      otherDaysPrices.sat.afternoon,\r\n    ];\r\n  }\r\n  \r\n  static getKabuTrendPredictionsFromKabuValue(kabuValue: number | string): KabuTrendType[] {\r\n    const K = Number(kabuValue);\r\n    if(K === 0) {\r\n      return ['notDefined'];\r\n    }\r\n    if(K >= 90) {\r\n      return ['wave', 'forth'];\r\n    }\r\n    else if(K >= 85) {\r\n      return ['third', 'forth', 'decrement'];\r\n    } \r\n    else if(K >= 80) {\r\n      return ['forth'];\r\n    }\r\n    else if(K >= 60) {\r\n      return ['wave', 'forth'];\r\n    }\r\n    return ['forth'];\r\n  }\r\n\r\n  static checkPricesAreAllBiggerThanZero(prices: number[]) {\r\n    if(prices.includes(0)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  static getTwoNumbersRatio(number1: number, number2: number) {\r\n    if(number2 === 0) {\r\n      return 0;\r\n    }\r\n    return number2 - number1;\r\n  }\r\n\r\n  static getPriceMultiWithOriginPrice(prices: number[]) {\r\n    const originPrice = prices[0];\r\n    return prices.map(p => {\r\n      if(originPrice === 0) {\r\n        return 0;\r\n      }\r\n      return (\r\n        Number((p / originPrice).toFixed(2))\r\n      );\r\n    });\r\n  }\r\n\r\n  static getPricesRatios(prices: number[]) {\r\n    let res: number[] = [];\r\n    for (let i = 0; i < prices.length; i++) {\r\n      //only sunday\r\n      if(i === 0) {\r\n        res[i] = 0;\r\n      } else {\r\n        res[i] = this.getTwoNumbersRatio(prices[i - 1], prices[i]);\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  static getPositionOfReboundInPriceRatios(priceRatios: number[]) {\r\n    let position = -1; //rebound not confirmed\r\n\r\n    for (let i = 0; i < priceRatios.length; i++) {\r\n      const ratio = priceRatios[i];\r\n      //exclude sunday position\r\n      if(ratio > 0) {\r\n        //if ratio is bigger than 0, it is not a decrement type\r\n        position = i;\r\n        break;\r\n      }\r\n    }\r\n\r\n    return position;\r\n  }\r\n\r\n  static getReboundAndHighestPricePosition(prices: number[]): {\r\n    haveRebound: boolean,\r\n    secondPriceIsInputed: boolean,\r\n    highestPricePosition?: {\r\n      firstPeriodPricePosition: number,\r\n      firstPeriodPriceMulti: number,\r\n\r\n      secondPeriodPricePosition: number,\r\n      secondPeriodPriceMulti: number,\r\n\r\n      thirdPeriodPricePosition: number,\r\n      thirdPeriodPriceMulti: number,\r\n\r\n      forthPeriodPricePosition: number,\r\n      forthPeriodPriceMulti: number,\r\n    }\r\n  } {\r\n    const priceMultiWithOriginPrice = this.getPriceMultiWithOriginPrice(prices);\r\n\r\n    const priceRatios = this.getPricesRatios(prices);\r\n    \r\n    const reboundPosition = this.getPositionOfReboundInPriceRatios(priceRatios);\r\n    const haveRebound = reboundPosition !== -1;\r\n\r\n    const firstPeriodPricePosition = reboundPosition;\r\n    const firstPeriodPriceMulti = priceMultiWithOriginPrice[firstPeriodPricePosition];\r\n\r\n    const secondPeriodPricePosition = reboundPosition + 1;\r\n    const secondPeriodPriceMulti = priceMultiWithOriginPrice[secondPeriodPricePosition];\r\n\r\n    const thirdPeriodPricePosition = reboundPosition + 2;\r\n    const thirdPeriodPriceMulti = priceMultiWithOriginPrice[thirdPeriodPricePosition];\r\n\r\n    const forthPeriodPricePosition = reboundPosition + 3;\r\n    const forthPeriodPriceMulti = priceMultiWithOriginPrice[forthPeriodPricePosition];\r\n\r\n    const secondPriceIsInputed = haveRebound && secondPeriodPriceMulti >= 1;\r\n    console.log(priceRatios, reboundPosition);\r\n\r\n    if(!haveRebound) {\r\n      return ({\r\n        haveRebound,\r\n        secondPriceIsInputed,\r\n        highestPricePosition: undefined\r\n      });\r\n    }\r\n\r\n    return ({\r\n      haveRebound,\r\n      secondPriceIsInputed,\r\n      highestPricePosition: {\r\n        firstPeriodPricePosition,\r\n        firstPeriodPriceMulti,\r\n\r\n        secondPeriodPriceMulti,\r\n        secondPeriodPricePosition,\r\n\r\n        thirdPeriodPricePosition,\r\n        thirdPeriodPriceMulti,\r\n\r\n        forthPeriodPricePosition,\r\n        forthPeriodPriceMulti,\r\n      }\r\n    });\r\n  }\r\n\r\n  static checkIsNoReboundBeforeLastPosition(prices: number[]) {\r\n    const priceRatios = this.getPricesRatios(prices);\r\n    const pricesBeforeLastCheck = prices.slice(0, lastCheckReboundPosition);\r\n    const priceRatiosBeforeLastCheck = priceRatios.slice(0, lastCheckReboundPosition);\r\n\r\n    const isAllPricesBeforeLastCheckAreHaveValues = this.checkPricesAreAllBiggerThanZero(pricesBeforeLastCheck);\r\n    const reboundPositionBeforeLastCheck = this.getPositionOfReboundInPriceRatios(priceRatiosBeforeLastCheck);\r\n\r\n    const noReboundBeforeLastCheck = \r\n      isAllPricesBeforeLastCheckAreHaveValues &&\r\n      reboundPositionBeforeLastCheck === -1;\r\n    \r\n    return noReboundBeforeLastCheck;\r\n  }\r\n\r\n  static getThirdOrForthKabuTrendType(prices: number[]): KabuTrendsAndHighestPricePosition {\r\n    const {\r\n      secondPriceIsInputed,\r\n      highestPricePosition,\r\n    } = this.getReboundAndHighestPricePosition(prices);\r\n\r\n    if(secondPriceIsInputed && highestPricePosition) {\r\n      const {\r\n        secondPeriodPriceMulti,\r\n        thirdPeriodPricePosition,\r\n        forthPeriodPricePosition,\r\n      } = highestPricePosition;\r\n      \r\n      if(secondPeriodPriceMulti < reboundTrendSeperatingMulti) {\r\n        return ({\r\n          kabuTrendTypes: ['forth'],\r\n          highestPricePosition: forthPeriodPricePosition\r\n        });\r\n      } else {\r\n        return ({\r\n          kabuTrendTypes: ['third'],\r\n          highestPricePosition: thirdPeriodPricePosition\r\n        });\r\n      }\r\n    }\r\n\r\n    return ({\r\n      kabuTrendTypes: ['third', 'forth'],\r\n      highestPricePosition: undefined,\r\n    });\r\n  }\r\n\r\n  static getWaveOrThirdOrForthKabuTrendType(prices: number[], kabuValue: number | string): KabuTrendsAndHighestPricePosition {\r\n    const K = Number(kabuValue);\r\n    if(K > 100) {\r\n      return this.getThirdOrForthKabuTrendType(prices);\r\n    }\r\n    return ({\r\n      kabuTrendTypes: ['wave'],\r\n      highestPricePosition: undefined,\r\n    });\r\n  }\r\n\r\n  static getWaveOrForthKabuTrendType(prices: number[]): KabuTrendsAndHighestPricePosition {\r\n    const pricesBeforeLastCheck = prices.slice(0, lastCheckReboundPosition);\r\n    const priceRatios = this.getPricesRatios(pricesBeforeLastCheck);\r\n\r\n    const {\r\n      secondPriceIsInputed,\r\n      highestPricePosition,\r\n    } = this.getReboundAndHighestPricePosition(pricesBeforeLastCheck);\r\n\r\n    if(secondPriceIsInputed && highestPricePosition) {\r\n      const {\r\n        forthPeriodPriceMulti,\r\n        forthPeriodPricePosition\r\n      } = highestPricePosition;\r\n\r\n      const isForthPeriod = \r\n        forthPeriodPriceMulti > 1.4 && \r\n        forthPeriodPriceMulti <= 2;\r\n      \r\n      if(isForthPeriod) {\r\n        return ({\r\n          kabuTrendTypes: ['forth'],\r\n          highestPricePosition: forthPeriodPricePosition\r\n        });\r\n      }\r\n    \r\n      //check is no rebound\r\n      const isNoReboundBeforeLastCheck = this.checkIsNoReboundBeforeLastPosition(prices);\r\n      //check have rebound but forth price is smaller than reboundTrendSeperatingMulti\r\n      const isForthPriceMultiSmallerThanReboundTrendSeperatingMulti = \r\n        priceRatios[forthPeriodPricePosition] > 0 &&\r\n        forthPeriodPriceMulti < reboundTrendSeperatingMulti;\r\n      console.log(priceRatios, priceRatios[forthPeriodPricePosition], forthPeriodPriceMulti);\r\n    \r\n      if(isNoReboundBeforeLastCheck || isForthPriceMultiSmallerThanReboundTrendSeperatingMulti) {\r\n        return ({\r\n          kabuTrendTypes: ['wave'],\r\n          highestPricePosition: undefined\r\n        });\r\n      }\r\n    }\r\n\r\n    return ({\r\n      kabuTrendTypes: ['forth', 'wave'],\r\n      highestPricePosition: undefined\r\n    });\r\n  }\r\n\r\n  static getDecrementOrThirdOrForthKabuTrendsAndPricePosition(prices: number[], kabuTrendTypes: KabuTrendType[]): KabuTrendsAndHighestPricePosition {\r\n    const {\r\n      haveRebound,\r\n    } = this.getReboundAndHighestPricePosition(prices);\r\n\r\n    //check is decrement first\r\n    const isReboundBeforeLastCheck = this.checkIsNoReboundBeforeLastPosition(prices);\r\n    if(isReboundBeforeLastCheck) {\r\n      return ({\r\n        kabuTrendTypes: ['decrement'],\r\n        highestPricePosition: noReboundPosition,\r\n      });\r\n    }\r\n\r\n    //maybe decrement / third / forth\r\n    const haveDecrementKabuTrendType = kabuTrendTypes.includes('decrement');\r\n    if(haveDecrementKabuTrendType && !haveRebound) {\r\n      return ({\r\n        kabuTrendTypes: ['third', 'forth', 'decrement'],\r\n        highestPricePosition: undefined\r\n      });\r\n    }\r\n     \r\n    //check is third / forth\r\n    return this.getThirdOrForthKabuTrendType(prices);\r\n  }\r\n\r\n  static getForthKabuTrendsAndPricePosition(prices: number[]): KabuTrendsAndHighestPricePosition {\r\n    const {\r\n      haveRebound,\r\n      highestPricePosition,\r\n    } = this.getReboundAndHighestPricePosition(prices);\r\n\r\n    if(haveRebound && highestPricePosition) {\r\n      return ({\r\n        kabuTrendTypes: ['forth'],\r\n        highestPricePosition: highestPricePosition.forthPeriodPricePosition\r\n      });\r\n    }\r\n\r\n    return ({\r\n      kabuTrendTypes: ['forth'],\r\n      highestPricePosition: undefined\r\n    });\r\n  }\r\n\r\n  static getPresiceTrendType(prices: number[]): KabuTrendsAndHighestPricePosition {\r\n    const priceMultiWithOriginPrice = this.getPriceMultiWithOriginPrice(prices);\r\n    const priceRatios = this.getPricesRatios(prices);\r\n    //rebound is first\r\n    const reboundPosition = this.getPositionOfReboundInPriceRatios(priceRatios);\r\n    console.log(priceMultiWithOriginPrice, priceRatios, reboundPosition);\r\n\r\n    const KabuValue = handleCalKabu(prices[0], prices[1]);\r\n    const typesFromKabuValue = this.getKabuTrendPredictionsFromKabuValue(KabuValue);\r\n\r\n    //check forth\r\n    const isForth = \r\n      typesFromKabuValue.includes('forth') && \r\n      typesFromKabuValue.length === 1;\r\n    \r\n    if(isForth) {\r\n      return this.getForthKabuTrendsAndPricePosition(prices);\r\n    }\r\n\r\n    //check is wave / third / forth\r\n    const isWaveOrThirdOrForth = \r\n      typesFromKabuValue.includes('third') && \r\n      typesFromKabuValue.includes('forth') && \r\n      typesFromKabuValue.includes('wave');\r\n    if(isWaveOrThirdOrForth) {\r\n      return this.getWaveOrThirdOrForthKabuTrendType(prices, KabuValue);\r\n    }\r\n\r\n    //check is forth / wave\r\n    const isWaveOrForth = \r\n      typesFromKabuValue.includes('wave') && \r\n      typesFromKabuValue.includes('forth') && \r\n      typesFromKabuValue.length === 2;\r\n\r\n    if(isWaveOrForth) {\r\n      return this.getWaveOrForthKabuTrendType(prices);\r\n    }\r\n    \r\n    //check is third or forth\r\n    const isDecrementOrThirdOrForth = \r\n      typesFromKabuValue.includes('third') && \r\n      typesFromKabuValue.includes('forth') && \r\n      typesFromKabuValue.includes('decrement');\r\n\r\n    if(isDecrementOrThirdOrForth) {\r\n      return this.getDecrementOrThirdOrForthKabuTrendsAndPricePosition(prices, typesFromKabuValue);\r\n    }\r\n\r\n    //last get basic default types from KabuValue\r\n    return ({\r\n      kabuTrendTypes: typesFromKabuValue,\r\n      highestPricePosition: undefined,\r\n    });\r\n  }\r\n}\r\n\r\nexport default HandleKabuTrends;","import { GridRatio } from \"common-types\";\r\nimport { KabuTrendType, OtherDayType, DayTimeType } from \"./types\";\r\nimport { noReboundPosition } from \"./functions/HandleKabuTrend\";\r\n\r\nexport const reportDocLink = 'https://docs.google.com/document/d/1LooeZ1qIbQnKRFvIcF6-a1RbbtA9UPt7gIBLnB2Gnp4/edit?usp=sharing';\r\n\r\nexport const localStorageKey = 'KabuForm';\r\nexport const storedDateLocalStorageKey = 'KabuFormDate';\r\n\r\nexport const otherDayKabuItemWidthRatios = [2, 5, 5] as GridRatio[];\r\n\r\nexport const kabuTrends: {\r\n  [t in KabuTrendType]: string\r\n} = {\r\n  notDefined: '資料不足',\r\n  decrement: '遞減型',\r\n  wave: '波型(最大價格0.9 ~ 1.4倍)',\r\n  third: '三期型(最大價格約2 ~ 6倍)',\r\n  forth: '四期型(最大價格約1.4 ~ 2倍)',\r\n};\r\n\r\nexport const positionUndefinedText_zhTw = '價格尚不足/可能為波型，無法預測最大值時間';\r\nexport const decrement_zhTw = '此為遞減型，不會有最大值，可以準備脫手賣掉了';\r\n\r\nexport const otherDaysText_zhTw: {\r\n  [day in OtherDayType]: string\r\n} = {\r\n  sun: '星期日',\r\n  mon: '星期一',\r\n  tue: '星期二',\r\n  wed: '星期三',\r\n  thu: '星期四',\r\n  fri: '星期五',\r\n  sat: '星期六',\r\n};\r\n\r\nexport const dayTimesText_zhTw: {\r\n  [dayTime in DayTimeType]: string\r\n} = {\r\n  morning: '上午(8:00~11:59)',\r\n  afternoon: '下午(12:00~22:00)'\r\n};\r\n\r\nexport const highestPositionToText: {\r\n  [x: number]: string\r\n} = {\r\n  0: `${otherDaysText_zhTw.sun} ${dayTimesText_zhTw.morning}`,\r\n\r\n  1: `${otherDaysText_zhTw.mon} ${dayTimesText_zhTw.morning}`,\r\n  2: `${otherDaysText_zhTw.mon} ${dayTimesText_zhTw.afternoon}`,\r\n\r\n  3: `${otherDaysText_zhTw.tue} ${dayTimesText_zhTw.morning}`,\r\n  4: `${otherDaysText_zhTw.tue} ${dayTimesText_zhTw.afternoon}`,\r\n\r\n  5: `${otherDaysText_zhTw.wed} ${dayTimesText_zhTw.morning}`,\r\n  6: `${otherDaysText_zhTw.wed} ${dayTimesText_zhTw.afternoon}`,\r\n\r\n  7: `${otherDaysText_zhTw.thu} ${dayTimesText_zhTw.morning}`,\r\n  8: `${otherDaysText_zhTw.thu} ${dayTimesText_zhTw.afternoon}`,\r\n\r\n  9: `${otherDaysText_zhTw.fri} ${dayTimesText_zhTw.morning}`,\r\n  10: `${otherDaysText_zhTw.fri} ${dayTimesText_zhTw.afternoon}`,\r\n\r\n  11: `${otherDaysText_zhTw.sat} ${dayTimesText_zhTw.morning}`,\r\n  12: `${otherDaysText_zhTw.sat} ${dayTimesText_zhTw.afternoon}`,\r\n};\r\n\r\nexport const getHighestPositionText = (position: number | undefined): string => {\r\n  if(position === noReboundPosition) {\r\n    return decrement_zhTw;\r\n  }\r\n  if(typeof position === 'undefined') {\r\n    return positionUndefinedText_zhTw; \r\n  } else {\r\n    return highestPositionToText[position];\r\n  }\r\n  \r\n};\r\n\r\n","import React from 'react';\r\nimport { Box, ListItem, ListItemText } from '@material-ui/core';\r\nimport CommonGridListItemWrapper from 'components/commonComponents/CommonGridListItem/CommonGridListItemWrapper';\r\nimport { otherDayKabuItemWidthRatios } from '../config';\r\n\r\nconst OtherDayKabuItemHeader = () => {\r\n  return (\r\n    <CommonGridListItemWrapper\r\n      widthRatios={otherDayKabuItemWidthRatios}\r\n    >\r\n      <ListItemText>\r\n        {'日期'}\r\n      </ListItemText>\r\n      <ListItemText>\r\n        {'上午(8:00~11:59)'}\r\n      </ListItemText>\r\n      <ListItemText>\r\n        {'下午(12:00~22:00)'}\r\n      </ListItemText>\r\n    </CommonGridListItemWrapper>\r\n  );\r\n};\r\n\r\nexport default OtherDayKabuItemHeader;","import React, { useCallback, ChangeEvent } from 'react';\r\nimport { Box, TextField } from '@material-ui/core';\r\nimport { InputItemContainerProps } from '../types';\r\nimport DateLocalStorageHandler from '../functions/DateLocalStorageHandler';\r\n\r\nconst InputItemContainer = (props: InputItemContainerProps) => {\r\n  const {\r\n    id,\r\n    value,\r\n    variant='standard',\r\n    onChange\r\n  } = props;\r\n\r\n  const handleChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\r\n    if(onChange) {\r\n      const {\r\n        value\r\n      } =  e.target;\r\n      onChange(props, value);\r\n    }\r\n  }, [onChange, props]);\r\n\r\n  return (\r\n    <TextField\r\n      {...props}\r\n      type={'number'}\r\n      variant={variant as any}\r\n      onChange={handleChange}\r\n      value={value} />\r\n  );\r\n};\r\n\r\nexport default InputItemContainer;","import React from 'react';\r\nimport { Box, ListItem, ListItemText, Grid } from '@material-ui/core';\r\nimport { OtherDayKabuItemProps } from './types';\r\nimport InputItemContainer from '../containers/InputItemContainer';\r\nimport CommonGridListItemWrapper from 'components/commonComponents/CommonGridListItem/CommonGridListItemWrapper';\r\nimport { otherDayKabuItemWidthRatios, otherDaysText_zhTw } from '../config';\r\n\r\nconst OtherDayKabuItem = (props: OtherDayKabuItemProps) => {\r\n  const {\r\n    date,\r\n    day,\r\n    dayTimePrices,\r\n  } = props;\r\n\r\n  return (\r\n    <CommonGridListItemWrapper\r\n      widthRatios={otherDayKabuItemWidthRatios}\r\n    >\r\n      <ListItemText>\r\n        {`${date || ''}${otherDaysText_zhTw[day]}`}\r\n      </ListItemText>\r\n      <Box paddingLeft={0.5}>\r\n        <InputItemContainer\r\n          id={`${day}-${'morning'}`}\r\n          day={day}\r\n          dayTime={'morning'}\r\n          value={String(dayTimePrices.morning)}\r\n          onChange={props.onChange} />\r\n      </Box>\r\n      <Box paddingLeft={0.5}>\r\n        <InputItemContainer\r\n          id={`${day}-${'afternoon'}`}\r\n          day={day}\r\n          dayTime={'afternoon'}\r\n          value={String(dayTimePrices.afternoon)}\r\n          onChange={props.onChange} />\r\n      </Box>\r\n    </CommonGridListItemWrapper>\r\n  );\r\n};\r\n\r\nexport default OtherDayKabuItem;","import React from 'react';\r\nimport { Box, Paper, Divider } from '@material-ui/core';\r\nimport OtherDayKabuItemHeader from './OtherDayKabuItemHeader';\r\nimport { OtherDayKabuFormProps } from './types';\r\nimport OtherDayKabuItem from './OtherDayKabuItem';\r\n\r\nconst OtherDayKabuForm = (props: OtherDayKabuFormProps) => {\r\n  return (\r\n    <Box paddingY={1}>\r\n      <Paper elevation={2}>\r\n        <OtherDayKabuItemHeader />\r\n        <Divider />\r\n        {props.otherDayList.map((d, i) => (\r\n          <OtherDayKabuItem\r\n            key={i}\r\n            {...d}\r\n            onChange={props.onChange} />\r\n        ))}\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default OtherDayKabuForm;","import { KabuTrendType } from \"../types\";\r\nimport texts from '../static/lang/texts.json';\r\nimport { Langs } from \"../static/lang/lang\";\r\n\r\nconst makeSellingAdvise = (locale: Langs = 'zh_TW') => (isOverdue: boolean, kabuTrendTypes: KabuTrendType[]) => {\r\n  const localeText = texts[locale];\r\n  const isOnlyOneType = kabuTrendTypes.length === 1;\r\n\r\n  const isWaveType = \r\n    kabuTrendTypes.includes('wave') && \r\n    isOnlyOneType;\r\n  const isThirdType = \r\n    kabuTrendTypes.includes('third') &&\r\n    isOnlyOneType;\r\n  const isForthType = \r\n    kabuTrendTypes.includes('forth') &&\r\n    isOnlyOneType;\r\n  const isPriceNotConfirmed = \r\n    kabuTrendTypes.includes('notDefined') ||\r\n    kabuTrendTypes.length > 1;\r\n    \r\n  if(isOverdue) {\r\n    return localeText['sellingAdvise.overdue'];\r\n  }\r\n  if(isPriceNotConfirmed) {\r\n    return localeText['sellingAdvise.default'];\r\n  }\r\n  if(isWaveType) {\r\n    return localeText['sellingAdvise.wave'];\r\n  }\r\n  if(isForthType) {\r\n    return localeText['sellingAdvise.forth'];\r\n  }\r\n  if(isThirdType) {\r\n    return localeText['sellingAdvise.third'];\r\n  }\r\n};\r\n\r\nexport default makeSellingAdvise;","export const getLastNotZeroNumberFromArr = (arr: number[]): number | undefined => {\r\n  let numberIndexes: number[] = [];\r\n\r\n  for (let i = 0; i < arr.length; i++) {\r\n    const number = arr[i];\r\n    if(number > 0) {\r\n      numberIndexes = [\r\n        ...numberIndexes,\r\n        i,\r\n      ];\r\n    }\r\n  }\r\n  const lastPosition = numberIndexes[numberIndexes.length - 1];\r\n\r\n  return lastPosition;\r\n};\r\n\r\nconst checkPriceIsOverdueHighest = (highestPricePosition: number | undefined, prices: number[]) => {\r\n  const latestPricesPosition = getLastNotZeroNumberFromArr(prices);\r\n  const isOverdue = \r\n    typeof highestPricePosition === 'number' && \r\n    typeof latestPricesPosition === 'number' && \r\n    latestPricesPosition > highestPricePosition;\r\n  if(isOverdue) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport default checkPriceIsOverdueHighest;","import React from 'react';\r\nimport { Box, Typography, Divider, makeStyles } from '@material-ui/core';\r\nimport { KabuTrendTypePredictionProps } from './types';\r\nimport { kabuTrends, highestPositionToText, getHighestPositionText } from '../config';\r\nimport makeSellingAdvise from '../functions/makeSellingAdvise';\r\nimport checkPriceIsOverdueHighest from '../functions/checkPriceIsOverdueHighest';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    borderColor: theme.palette.primary.dark,\r\n    borderWidth: 1.5,\r\n    borderStyle: 'solid',\r\n    borderRadius: 10,\r\n  }\r\n}));\r\n\r\nconst KabuTrendTypePrediction = (props: KabuTrendTypePredictionProps) => {\r\n  const {\r\n    highestPricePosition,\r\n    prices,\r\n    kabuTrendTypes,\r\n  } = props;\r\n\r\n  const classes = useStyles();\r\n  const trendsStr = props.kabuTrendTypes.map(\r\n    trend => kabuTrends[trend]\r\n  ).join(' / ');\r\n\r\n  console.log(props.highestPricePosition);\r\n  const isOverdue = checkPriceIsOverdueHighest(highestPricePosition, prices);\r\n  const sellingAdvise = makeSellingAdvise()(isOverdue, kabuTrendTypes);\r\n  \r\n  return (\r\n    <Box className={classes.root} padding={1}>\r\n      <Box display={'flex'} alignItems={'center'} paddingTop={1} paddingBottom={1}>\r\n        <Typography>\r\n          {'目前可能趨勢: '}\r\n        </Typography>\r\n        <Typography variant={'h6'}>\r\n          {`${trendsStr}`}\r\n        </Typography>\r\n      </Box>\r\n      <Divider />\r\n      <Box display={'flex'} alignItems={'center'} paddingTop={1} paddingBottom={1}>\r\n        <Typography>\r\n          {'預測價格最大值時間: '}\r\n        </Typography>\r\n        <Typography variant={'h5'}>\r\n          {`${getHighestPositionText(props.highestPricePosition)}`}\r\n        </Typography>\r\n      </Box>\r\n      <Divider />\r\n      <Box display={'flex'} alignItems={'center'} paddingTop={1} paddingBottom={1}>\r\n        <Typography>\r\n          {'販賣建議: '}\r\n        </Typography>\r\n        <Typography variant={'h5'}>\r\n          {`${sellingAdvise}`}\r\n        </Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default KabuTrendTypePrediction;","import React, { useCallback } from 'react';\r\nimport { Box, Button, makeStyles } from '@material-ui/core';\r\nimport HandleLocalStorage from '../functions/HandleLocalStorage';\r\nimport { ResetButtonContainerProps } from './types';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    backgroundColor: theme.palette.primary.main,\r\n  }\r\n}));\r\n\r\nconst ResetButtonContainer = (props: ResetButtonContainerProps) => {\r\n  const classes = useStyles();\r\n\r\n  const handleResetPrices = useCallback(() => {\r\n    if(window.confirm('確定重設本周所有價格嗎?')) {\r\n      props.resetPricesFn();\r\n    }\r\n  }, [props]);\r\n  \r\n  return (\r\n    <Button \r\n      className={classes.root}\r\n      onClick={handleResetPrices}\r\n    >\r\n      {'重設本周所有價格'}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default ResetButtonContainer;","import DateLocalStorageHandler from \"./DateLocalStorageHandler\";\r\n\r\nclass KabuFormDateHandler {\r\n  static thisWeekSundayDate = ''\r\n  static weekStrJoinSymbol = ' ~ '\r\n\r\n  static getThisWeekSunday(today: Date) {\r\n    const todayDay = today.getDay();\r\n    const thisWeekSunday = new Date(today.setDate(today.getDate() - todayDay));  \r\n    return thisWeekSunday;\r\n  }\r\n\r\n  static getThisWeekOtherDayFromSunday(thisWeekSunday: Date, next: number) {\r\n    const _thisWeekSunday = new Date(thisWeekSunday);\r\n    const otherDay = new Date(\r\n      _thisWeekSunday.setDate(_thisWeekSunday.getDate() + next)\r\n    );  \r\n    return otherDay;\r\n  }\r\n\r\n  static getThisWeekSaturdayFromSunday(thisWeekSunday: Date) {\r\n    const thisWeekSaturday = this.getThisWeekOtherDayFromSunday(thisWeekSunday, 6);  \r\n    return thisWeekSaturday;\r\n  }\r\n\r\n  static getThisWeekFromToDatesWithStoredDate() {\r\n    const storedSundayDate = DateLocalStorageHandler.getData();\r\n    if(storedSundayDate) {\r\n      const thisWeekSaturday = this.getThisWeekSaturdayFromSunday(storedSundayDate);\r\n      return [\r\n        storedSundayDate,\r\n        thisWeekSaturday,\r\n      ];\r\n    }\r\n    return [];\r\n  }\r\n\r\n  static convertDatesToJoinedStr(dates: Date[]) {\r\n    if(dates.length > 0) {\r\n      return dates\r\n        .map(d => (\r\n          `${d.getMonth() + 1}/${d.getDate()}`\r\n        ))\r\n        .join(this.weekStrJoinSymbol);\r\n    }\r\n    return '';\r\n  }\r\n}\r\n\r\nexport default KabuFormDateHandler;","import { storedDateLocalStorageKey } from \"../config\";\r\nimport KabuFormDateHandler from \"./KabuFormDateHandler\";\r\n\r\nclass DateLocalStorageHandler {\r\n  static getData() {\r\n    const dateStr = localStorage.getItem(storedDateLocalStorageKey);\r\n    if(dateStr) {\r\n      return new Date(dateStr);\r\n    }\r\n  }\r\n\r\n  static setData(date: string | Date) {\r\n    const dateStr = date.toString();\r\n    localStorage.setItem(storedDateLocalStorageKey, dateStr);\r\n  }\r\n\r\n  static checkIsNewWeek() {\r\n    const storedDate = this.getData();\r\n    const today = new Date();\r\n    const thisWeekSunday = KabuFormDateHandler.getThisWeekSunday(today);\r\n    const storedDateNotEqualToThisWeekSunday = !storedDate || (\r\n      storedDate.toLocaleDateString() !== thisWeekSunday.toLocaleDateString()\r\n    );\r\n    return storedDateNotEqualToThisWeekSunday;\r\n  }\r\n\r\n  static storeThisWeekSunday() {\r\n    const today = new Date();\r\n    const thisWeekSunday = KabuFormDateHandler.getThisWeekSunday(today);\r\n    this.setData(thisWeekSunday);\r\n  }\r\n}\r\n\r\nexport default DateLocalStorageHandler;","import { OtherDayKabuFormContainerProps } from \"../containers/types\";\r\nimport { localStorageKey, storedDateLocalStorageKey } from \"../config\";\r\n\r\nexport const initDayPrices = {\r\n  'morning': 0,\r\n  'afternoon': 0,\r\n};\r\n\r\nexport const defaultInitOtherDayPrices: OtherDayKabuFormContainerProps['initOtherDayPrices'] = {\r\n  'sun': initDayPrices,\r\n  'mon': initDayPrices,\r\n  'tue': initDayPrices,\r\n  'wed': initDayPrices,\r\n  'thu': initDayPrices,\r\n  'fri': initDayPrices,\r\n  'sat': initDayPrices,\r\n};\r\n\r\nclass HandleLocalStorage {\r\n  static getData() {\r\n    const data = localStorage.getItem(localStorageKey);\r\n    if(data) {\r\n      const parsed = JSON.parse(data);\r\n      console.log(parsed);\r\n      return parsed as OtherDayKabuFormContainerProps['initOtherDayPrices'];\r\n    }\r\n    return defaultInitOtherDayPrices;\r\n  }\r\n  \r\n  static reset() {\r\n    localStorage.setItem(localStorageKey, '');\r\n    localStorage.setItem(storedDateLocalStorageKey, '');\r\n  }\r\n}\r\n\r\nexport default HandleLocalStorage;","/* eslint-disable no-useless-escape */\r\n\r\nimport { FormattedText } from \"../types\";\r\n\r\nconst highlightRegExpLeft = '\\<h\\>';\r\nconst highlightRegExpRight = '\\<\\/h\\>';\r\n\r\nclass HighlightTextHandler {\r\n  static highlightRegExp = new RegExp(`${highlightRegExpLeft}.+?${highlightRegExpRight}`, 'g')\r\n  static highlightForRemoveTagRegExp = new RegExp(`${highlightRegExpLeft}|${highlightRegExpRight}`, 'g')\r\n\r\n  static removeHighlightTag(content: string) {\r\n    return content.replace(this.highlightForRemoveTagRegExp, '');\r\n  }\r\n\r\n  static splitTextWithRegExp(text: string): FormattedText[] {\r\n    let res: FormattedText[] = [];\r\n    let textNow = text;\r\n\r\n    const matchRes = text.match(this.highlightRegExp);\r\n    console.log(text, matchRes);\r\n\r\n    if(matchRes) {\r\n      for (let i = 0; i < matchRes.length; i++) {\r\n        const matchedStr = matchRes[i];\r\n        const matchedStrLength = matchedStr.length;\r\n        const matchedFirstIndex = textNow.indexOf(matchedStr);\r\n\r\n        const matchedNormalStr = textNow.slice(0, matchedFirstIndex);\r\n        res = [\r\n          ...res,\r\n          {\r\n            type: 'normal',\r\n            content: matchedNormalStr,\r\n          }\r\n        ];\r\n\r\n        textNow = textNow.slice(matchedFirstIndex);\r\n        const content = this.removeHighlightTag(matchedStr);\r\n        res = [\r\n          ...res,\r\n          {\r\n            type: 'highlight',\r\n            content,\r\n          }\r\n        ];\r\n        textNow = textNow.slice(matchedStrLength);\r\n      }\r\n    }\r\n    //us remain texts?\r\n    if(textNow) {\r\n      res = [\r\n        ...res,\r\n        {\r\n          type: 'normal',\r\n          content: textNow,\r\n        }\r\n      ];\r\n    }\r\n\r\n    return res;\r\n  }\r\n}\r\n\r\nexport default HighlightTextHandler;","import React from 'react';\r\nimport { FormattedText } from '../types';\r\nimport { Typography, makeStyles, Box } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    backgroundColor: theme.palette.primary.main,\r\n    // borderWidth: '0px 0px 2.5px 0px',\r\n    // borderColor: theme.palette.primary.dark,\r\n    // borderStyle: 'solid',\r\n    padding: theme.spacing(0.2),\r\n    borderRadius: theme.spacing(0.2),\r\n  }\r\n}));\r\n\r\nconst GetFormattedTextByType = (formatedText: FormattedText, index: number) => {\r\n  const classes = useStyles();\r\n  \r\n  switch (formatedText.type) {\r\n  case 'highlight': {\r\n    return (\r\n      <Box\r\n        key={index}\r\n        component={'span'}\r\n        className={classes.root}\r\n      >\r\n        {formatedText.content}\r\n      </Box>\r\n    );\r\n  }\r\n  case 'normal': {\r\n    return (\r\n      <Box\r\n        key={index}\r\n        component={'span'}\r\n      >\r\n        {formatedText.content}\r\n      </Box>\r\n    );\r\n  }\r\n  default:\r\n    return <></>;\r\n  }\r\n};\r\n\r\nexport default GetFormattedTextByType;","import React from 'react';\r\nimport { Box, Typography, Divider, makeStyles } from '@material-ui/core';\r\nimport { AnnouncementItemProps } from './types';\r\nimport texts from '../static/lang/texts.json';\r\nimport HighlightTextHandler from '../functions/HighlightTextHandler';\r\nimport GetFormattedTextByType from '../functions/getFormattedTextByType';\r\n\r\n\r\nconsole.log(HighlightTextHandler.splitTextWithRegExp('<h>ccaak</h>ccbb<h>dcaa</h><h>bcaaa</h>'));\r\n\r\nconst annoucementContents = [\r\n  texts['zh_TW']['announcement.1'],\r\n  texts['zh_TW']['announcement.2'],\r\n];\r\n\r\nexport const AnnouncementItem = (props: AnnouncementItemProps) => {\r\n  const formatedTextList = HighlightTextHandler.splitTextWithRegExp(props.content);\r\n\r\n  return (\r\n    <Box paddingTop={1}>\r\n      <Typography>\r\n        {`${props.index + 1}. `}\r\n        {formatedTextList.map(GetFormattedTextByType)}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  title: {\r\n    fontWeight: 600,\r\n    color: theme.palette.primary.dark,\r\n  },\r\n  root: {\r\n    // backgroundColor: theme.palette.primary.dark,\r\n    // color: '#fff',\r\n    borderRadius: 10,\r\n  }\r\n}));\r\n\r\nconst Announcements = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Box className={classes.root} padding={1}>\r\n      <Typography variant={'h6'} className={classes.title}>\r\n        {'注意事項'}\r\n      </Typography>\r\n      <Divider />\r\n      <Box>\r\n        {annoucementContents.map((a, index) => (\r\n          <AnnouncementItem\r\n            index={index}\r\n            content={a} />\r\n        ))}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Announcements;\r\n","import React, { useState, useCallback, useEffect } from 'react';\r\nimport { Box, Divider, Typography, Container } from '@material-ui/core';\r\nimport OtherDayKabuForm from '../components/OtherDayKabuForm';\r\nimport { DayAndTime, SingleWeekKabuRecord, OtherDayType, SingleOtherDayPrices } from '../types';\r\nimport InputItemContainer from './InputItemContainer';\r\nimport handleCalKabu from '../functions/handleCalKabu';\r\nimport { OtherDayKabuFormContainerProps } from './types';\r\nimport { localStorageKey } from '../config';\r\nimport KabuTrendTypePrediction from '../components/KabuTrendTypePrediction';\r\nimport HandleKabuTrends from '../functions/HandleKabuTrend';\r\nimport ResetButtonContainer from './ResetButtonContainer';\r\nimport { defaultInitOtherDayPrices } from '..';\r\nimport DateLocalStorageHandler from '../functions/DateLocalStorageHandler';\r\nimport texts from '../static/lang/texts.json';\r\nimport KabuFormDateHandler from '../functions/KabuFormDateHandler';\r\nimport HandleLocalStorage from '../functions/HandleLocalStorage';\r\nimport Announcements from '../components/Announcements';\r\n\r\nexport const otherDaysArr: OtherDayType[] = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\r\n\r\nconst OtherDayKabuFormContainer = (props: OtherDayKabuFormContainerProps) => {\r\n  const [dayPrices, setDayPrices] = useState(props.initOtherDayPrices);\r\n  const [fromToDatesStr, setDatesStr] = useState(texts['zh_TW']['fromToDates.default']);\r\n\r\n  const handleChange = useCallback((dayAndTime: DayAndTime, value: string) => {\r\n    setDayPrices(d => ({\r\n      ...d,\r\n      [dayAndTime.day]: {\r\n        ...d[dayAndTime.day],\r\n        [dayAndTime.dayTime]: Number(value),\r\n      }\r\n    }));\r\n  }, []);\r\n\r\n  const handleResetPricesAndDate = useCallback(() => {\r\n    HandleLocalStorage.reset();\r\n    setDayPrices(defaultInitOtherDayPrices);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(localStorageKey, JSON.stringify(dayPrices));\r\n\r\n    \r\n  }, [dayPrices]);\r\n\r\n  useEffect(() => {\r\n    const isNewWeek = DateLocalStorageHandler.checkIsNewWeek();\r\n    if(isNewWeek) {\r\n      handleResetPricesAndDate();\r\n      DateLocalStorageHandler.storeThisWeekSunday();\r\n    }\r\n    //set week from to dates\r\n    const thisWeekFromToDates = KabuFormDateHandler.getThisWeekFromToDatesWithStoredDate();\r\n    const thisWeekFromToDatesStr = KabuFormDateHandler.convertDatesToJoinedStr(thisWeekFromToDates);\r\n    setDatesStr(thisWeekFromToDatesStr);\r\n  }, [handleResetPricesAndDate]);\r\n\r\n  //excludes sunday\r\n  const days = otherDaysArr;\r\n  const otherDayList = days.map(day => ({\r\n    day,\r\n    dayTimePrices: dayPrices[day]\r\n  }));\r\n\r\n  const prices = HandleKabuTrends.getThisWeekPrices(dayPrices);\r\n  const kabuTrendTypesAndPricePosition = HandleKabuTrends.getPresiceTrendType(prices);\r\n\r\n  return (\r\n    <Container>\r\n      <Box>\r\n        <Typography variant={'h6'}>\r\n          {`${fromToDatesStr}`}\r\n        </Typography>\r\n        <Divider />\r\n        <Typography variant={'h6'}>\r\n          {'週日原買價'}\r\n        </Typography>\r\n        <InputItemContainer\r\n          id={'sunday-morning'}\r\n          day={'sun'}\r\n          dayTime={'morning'}\r\n          variant={'outlined'}\r\n          onChange={handleChange}\r\n          value={String(dayPrices.sun.morning)} />\r\n      </Box>\r\n      <OtherDayKabuForm\r\n        otherDayList={otherDayList}\r\n        onChange={handleChange} />\r\n      <Box paddingBottom={1}>\r\n        <KabuTrendTypePrediction\r\n          prices={prices}\r\n          {...kabuTrendTypesAndPricePosition} />\r\n      </Box>\r\n      <Box paddingBottom={1}>\r\n        <Announcements />\r\n      </Box>\r\n      <Box paddingBottom={1} textAlign={'center'}>\r\n        <ResetButtonContainer\r\n          resetPricesFn={handleResetPricesAndDate} />\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default OtherDayKabuFormContainer;","import React from 'react';\r\nimport { Box, Typography, makeStyles, Button } from '@material-ui/core';\r\nimport { reportDocLink } from '../config';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    backgroundColor: '#b0f7e3'\r\n  }\r\n}));\r\n\r\nconst Header = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Box \r\n      className={classes.root} \r\n      paddingLeft={2} \r\n      paddingY={2}\r\n      display={'flex'}\r\n      alignItems={'center'}\r\n      justifyContent={'space-between'}\r\n    >\r\n      <Box\r\n        display={'flex'}\r\n        alignItems={'center'}\r\n      >\r\n        <Box paddingRight={2}>\r\n          <img \r\n            src={'./images/Animal_Crossing_Leaf.png'} \r\n            alt={'logo'} \r\n            style={{\r\n              width: 20,\r\n              height: 'auto'\r\n            }}\r\n          />\r\n        </Box>\r\n        <Typography>\r\n          {'動物森友會 大頭菜價格趨勢預測'}\r\n        </Typography>\r\n        {/* <Typography>\r\n          {'Animal Crossing New Horizons'}\r\n        </Typography> */}\r\n      </Box>\r\n      <Button\r\n        // color={'secondary'}\r\n        variant={'outlined'}\r\n        target={'_blank'}\r\n        href={reportDocLink}\r\n      >\r\n        {'問題回報'}\r\n      </Button>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\nimport { Box, Typography, Link, Divider, List, ListItemText, ListItem } from '@material-ui/core';\r\nimport referenceLinks from '../static/referenceLinks.json';\r\nimport texts from '../static/lang/texts.json';\r\n\r\nconst version = process.env.REACT_APP_VERSION;\r\n\r\nexport const LinkItemInFooter = ({\r\n  href,\r\n  title,\r\n}: {\r\n  href: string\r\n  title: string\r\n}) => {\r\n  return (\r\n    <Link \r\n      display={'block'}\r\n      href={href}\r\n      target={'_blank'}\r\n      color={'textSecondary'}\r\n    >\r\n      {title}\r\n    </Link>\r\n  );\r\n};\r\n\r\nconst links = referenceLinks;\r\nconst footerRemarks = [\r\n  `${texts['zh_TW']['footer.remark.1']}`,\r\n  `${texts['zh_TW']['footer.remark.2']}`,\r\n  `${texts['zh_TW']['footer.remark.3']}`,\r\n];\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <Box\r\n      style={{\r\n        backgroundColor: '#eee'\r\n      }}\r\n      paddingLeft={2} \r\n      paddingY={2}\r\n    >\r\n      {footerRemarks.map((r, i) => (\r\n        <>\r\n          <Typography key={i}>{r}</Typography>\r\n          <Divider />\r\n        </>\r\n      ))}\r\n      <Box paddingY={1}>\r\n        <Typography>\r\n          {'參考來源'}\r\n        </Typography>\r\n        {links.map((link, i) => (\r\n          <LinkItemInFooter\r\n            key={i}\r\n            {...link} />\r\n        ))}\r\n        <Divider />\r\n      </Box>\r\n      <Typography>{`v${version}`}</Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Footer;","import { createMuiTheme } from \"@material-ui/core\";\r\n\r\nconst anclTheme = createMuiTheme({\r\n  typography: {\r\n    fontFamily: [\r\n      '微軟正黑體'\r\n    ].join(),\r\n  },\r\n  palette: {\r\n    primary: {\r\n      light: '#cffaee',\r\n      main: '#b0f7e3',\r\n      dark: '#58d1b0'\r\n    },\r\n    text: {\r\n      secondary: '#0f8cd9'\r\n    }\r\n  }\r\n});\r\n\r\nexport default anclTheme;","import React from 'react';\r\nimport { OtherDayKabuFormContainerProps } from './containers/types';\r\nimport OtherDayKabuFormContainer from './containers/OtherDayKabuFormContainer';\r\nimport HandleLocalStorage from './functions/HandleLocalStorage';\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport { Box } from '@material-ui/core';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport anclTheme from './theme/theme';\r\n\r\nexport const initDayPrices = {\r\n  'morning': 0,\r\n  'afternoon': 0,\r\n};\r\n\r\nexport const defaultInitOtherDayPrices: OtherDayKabuFormContainerProps['initOtherDayPrices'] = {\r\n  'sun': initDayPrices,\r\n  'mon': initDayPrices,\r\n  'tue': initDayPrices,\r\n  'wed': initDayPrices,\r\n  'thu': initDayPrices,\r\n  'fri': initDayPrices,\r\n  'sat': initDayPrices,\r\n};\r\n\r\nconst KabuRecord = () => {\r\n  return (\r\n    <ThemeProvider theme={anclTheme}>\r\n      <Header />\r\n      <Box style={{\r\n        minHeight: '100vh'\r\n      }}>\r\n        <OtherDayKabuFormContainer\r\n          initOtherDayPrices={HandleLocalStorage.getData()} />\r\n      </Box>\r\n      <Footer />\r\n    </ThemeProvider>\r\n  );\r\n};\r\n\r\nexport default KabuRecord;","import React from 'react';\r\nimport './App.css';\r\nimport KabuRecord from 'app/KabuRecord';\r\n// import 'style/style.css';\r\n\r\nconst App: React.FC = () => {\r\n  return (\r\n    <>\r\n      <KabuRecord />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}